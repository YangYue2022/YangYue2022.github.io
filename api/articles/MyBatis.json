{"title":"MyBatis","uid":"7a897380fbf2b52c7fdc533d413e1985","slug":"MyBatis","date":"2023-03-02T16:00:00.000Z","updated":"2023-04-18T12:15:07.309Z","comments":true,"path":"api/articles/MyBatis.json","keywords":null,"cover":[],"content":"<h1 id=\"MyBatis\"><a href=\"#MyBatis\" class=\"headerlink\" title=\"MyBatis\"></a>MyBatis</h1><p>mysql 密码：yang</p>\n<p><img src=\"/img/image-20230303111759679.png\" alt=\"image-20230303111759679\"></p>\n<h1 id=\"配置数据库路径\"><a href=\"#配置数据库路径\" class=\"headerlink\" title=\"配置数据库路径\"></a>配置数据库路径</h1><p>加入 mysql 和 mybatis 依赖</p>\n<p>连接池配置</p>\n<pre class=\"line-numbers language-properties\" data-language=\"properties\"><code class=\"language-properties\"><span class=\"token comment\"># DataSourceProperties</span>\n<span class=\"token key attr-name\">spring.datasource.driver-class-name</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">com.mysql.cj.jdbc.Driver</span>\n<span class=\"token key attr-name\">spring.datasource.url</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">jdbc:mysql://localhost:3306/community?characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Hongkong</span>\n<span class=\"token key attr-name\">spring.datasource.username</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">root</span>\n<span class=\"token key attr-name\">spring.datasource.password</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">yang</span>\n<span class=\"token key attr-name\">spring.datasource.type</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">com.zaxxer.hikari.HikariDataSource</span>\n<span class=\"token key attr-name\">spring.datasource.hikari.maximum-pool-size</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">15</span>\n<span class=\"token key attr-name\">spring.datasource.hikari.minimum-idle</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">5</span>\n<span class=\"token key attr-name\">spring.datasource.hikari.idle-timeout</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">30000</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>mybatis 配置，用 entity 类封装表里的数据</p>\n<pre class=\"line-numbers language-properties\" data-language=\"properties\"><code class=\"language-properties\"><span class=\"token comment\"># MybatisProperties</span>\n<span class=\"token key attr-name\">mybatis.mapper-locations</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">classpath:mapper/*.xml</span>\n<span class=\"token key attr-name\">mybatis.type-aliases-package</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">com.nowcoder.community.entity</span>\n<span class=\"token key attr-name\">mybatis.configuration.useGeneratedKeys</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">true</span>\n<span class=\"token key attr-name\">mybatis.configuration.mapUnderscoreToCamelCase</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"mapper-使用方法\"><a href=\"#mapper-使用方法\" class=\"headerlink\" title=\"mapper 使用方法\"></a>mapper 使用方法</h1><ol>\n<li>实体类：get set 函数</li>\n<li>dao 类：设置 mapper 接口，定义对实体类进行操作的函数<br>注解@Mapper<br>insert 和 update 返回 int，表示修改行数<br>select 返回 user 实体类</li>\n<li>resources&#x2F;mapper 中：mapper.xml 写函数对应的 sql 操作<br>mybatis 官网查找对应模板<br>id 即对应的函数</li>\n</ol>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?></span>\n<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">mapper</span>\n        <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span>\n        <span class=\"token string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">namespace</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.nowcoder.community.dao.UserMapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>sql</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>insertFields<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        username, password, salt, email, type, status, activation_code, header_url, create_time\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>sql</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>sql</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectFields<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        id, username, password, salt, email, type, status, activation_code, header_url, create_time\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>sql</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectById<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">resultType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>User<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        select <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">refid</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectFields<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>include</span><span class=\"token punctuation\">></span></span>\n        from user\n        where id = #&#123;id&#125;\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>insert</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>insertUser<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">parameterType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>User<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">keyProperty</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        insert into user (<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">refid</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>insertFields<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>include</span><span class=\"token punctuation\">></span></span>)\n        values(#&#123;username&#125;, #&#123;password&#125;, #&#123;salt&#125;, #&#123;email&#125;, #&#123;type&#125;, #&#123;status&#125;, #&#123;activationCode&#125;, #&#123;headerUrl&#125;, #&#123;createTime&#125;)\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>insert</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>update</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>updateStatus<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        update user set status = #&#123;status&#125; where id = #&#123;id&#125;\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>update</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mapper</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","text":"MyBatismysql 密码：yang 配置数据库路径加入 mysql 和 mybatis 依赖 连接池配置 # DataSourceProperties spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver ...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"Spring","slug":"Spring","count":3,"path":"api/tags/Spring.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#MyBatis\"><span class=\"toc-text\">MyBatis</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%B7%AF%E5%BE%84\"><span class=\"toc-text\">配置数据库路径</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#mapper-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">mapper 使用方法</span></a></li></ol>","author":{"name":"Serena","slug":"blog-author","avatar":"/img/logo.png","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>QQ：1424935869</b>","socials":{"github":"https://github.com/YangYue2022","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://m.weibo.cn/","zhihu":"","csdn":"https://blog.csdn.net/Serena2000?spm=1000.2115.3001.5343","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"数据结构（2）","uid":"36c6381217e805c389535529f356949e","slug":"数据结构2","date":"2023-03-16T16:00:00.000Z","updated":"2023-03-17T06:03:02.373Z","comments":true,"path":"api/articles/数据结构2.json","keywords":null,"cover":[],"text":"图图的存储方式邻接矩阵法 空间复杂度 O(n2)，不适合存储稀疏图，浪费空间 矩阵相乘：A^(2)得到的矩阵代表从顶点 i 到 j 长度为 2 的路径条数 邻接表法 十字链表（有向图） 邻接多重表（无向图）当使用邻接表存储时，一条边会对应两份冗余数据，删除节点时很麻烦 遍历#in...","link":"","photos":[],"count_time":{"symbolsCount":"10k","symbolsTime":"9 mins."},"categories":[],"tags":[{"name":"基础知识","slug":"基础知识","count":3,"path":"api/tags/基础知识.json"}],"author":{"name":"Serena","slug":"blog-author","avatar":"/img/logo.png","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>QQ：1424935869</b>","socials":{"github":"https://github.com/YangYue2022","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://m.weibo.cn/","zhihu":"","csdn":"https://blog.csdn.net/Serena2000?spm=1000.2115.3001.5343","juejin":"","customs":{}}}},"next_post":{"title":"SpringMVC","uid":"cd53cdbf97b8f99c953dd3eda45eed25","slug":"SpringMVC","date":"2023-03-02T16:00:00.000Z","updated":"2023-04-18T12:13:01.664Z","comments":true,"path":"api/articles/SpringMVC.json","keywords":null,"cover":[],"text":"Spring MVC 椤圭洰缁撴瀯 controller 鎺 у 埗灞 � dao 鏁版嵁璁块棶灞 � service 涓氬姟灞 � model 鏄  嚜甯︾粨鏋 � 妯 ℃ 澘鏂囦欢鏀惧湪 templates model 鍜屾 ā 鏉挎枃浠堕 € 氳繃妯 ℃ 澘寮曟搸 Thy...","link":"","photos":[],"count_time":{"symbolsCount":"4.6k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"Spring","slug":"Spring","count":3,"path":"api/tags/Spring.json"}],"author":{"name":"Serena","slug":"blog-author","avatar":"/img/logo.png","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>QQ：1424935869</b>","socials":{"github":"https://github.com/YangYue2022","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://m.weibo.cn/","zhihu":"","csdn":"https://blog.csdn.net/Serena2000?spm=1000.2115.3001.5343","juejin":"","customs":{}}}}}